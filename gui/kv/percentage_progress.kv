<PercentageProgress>:
    max: 100
    value: 0
 
    canvas:
        Color:
            rgba: 0.2, 0.2, 0.2, 1 

        Rectangle:
            pos: self.x + dp(5), self.y + dp(5)
            size: self.width - dp(10), self.height - dp(10)

        Color:
            rgba: 0.8, 0.1, 0.5, 1

        Rectangle:
            pos: self.x + dp(5), self.y + dp(5)
            size: (self.width - dp(10)) * (self.value / self.max) if self.max else dp(5), self.height - dp(10)
    
    Label:
        pos_hint: {"x": 0, "top": 1}
        size_hint: 1, 1
        text: "{0:.0f}%".format(root.value)
        font_size: min(self.height/2, self.width/4)